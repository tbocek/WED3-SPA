<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>Market</title>
</head>
<body>

<h2 >Coinmarketcap without releading page</h2>
<button type="submit" onClick="send();">Submit</button>
<p id="text">n/a</p>


<script type="text/javascript">
    function send() {
        //service returns: access-control-allow-origin: * -> works with adblockers
        fetch('https://blockchain.info/ticker').then((resp) => resp.json())
            .then(data => {
                //console.log(data);
                let string = 'Markets:<br> USD:' + data.USD.last;
                let element = document.getElementById('text');
                element.innerHTML = string;
            });
        //fetch('/api')
        /*fetch('https://api.coinmarketcap.com/v1/ticker/?limit=10')
                .then ()((resp) => resp.json())
                .then(data => {
                    //console.log(data);
                    let string = 'Markets:<br>';
                    for(let s of data) {
                        string += s.name + ', price=' + s.price_usd + '<br>';
                    }
                    let element = document.getElementById('text');
                    element.innerHTML = string;
                });*/
    }
</script>
</body>
</html>